{% extends 'base.html' %}

{% block title %}
Project {{project.name}}
{% endblock %}

{% block content %}
<h2>Project #{{project.id}}: {{project.name}}</h2>
    <a href= '/project/{{project.name}}/wall/'><button type='submit'>Wall</button></a>
    <a href= '/project/{{project.name}}/documentation/'><button type='submit'>Documentation</button></a>
    {% if editable %}
    <a href= '/project/{{project.name}}/edit'><button type='submit'>Edit</button></a>
    {% endif %}
    
    <h3>Sprints</h3>
    {% if create_sprint %}

    <a href= '/project/{{project.name}}/new_sprint/'><button type='submit'>Create Sprint</button></a>
    {% endif %}
    
    {% load django_tables2 %}

    {% for sprint, userstory_table,accepted_userstories,unaccepted_userstories, deleteable, sprint_status in sprint_tables %}
        <h3>Sprint: <a href='/project/{{project.name}}/sprint/{{sprint.id}}'> {{ sprint.start_date }} - {{ sprint.end_date }} </a>
        <span style="color: 
            {% if sprint_status == 'Active' %}
                green;
            {% elif sprint_status == 'Finished' %}
                grey;
            {% else %}
                red;
            {% endif %}">
            {{sprint_status}}
        </span>
    </h3>
        {% if unaccepted_userstories.rows %}
        {% render_table unaccepted_userstories %}
        {% endif %}
        {% if accepted_userstories.rows %}
        <h4>Accepted Stories</h4>
        {% render_table accepted_userstories %}
        {% endif %}
    {% endfor %}
<h3>Backlog:</h3>
{% if new_user_story_enabled %}
<a href='/project/{{project.name}}/new_user_story/'><button type='submit'>New User Story</button></a>
{% endif %}
{% if active_stories.rows %}
<h4>Active</h4>
{% render_table active_stories %}
{% endif %}
{% if backlog_stories.rows %}
<h4>Backlog stories (spremeni)</h4>
{% render_table backlog_stories %}
{% endif %}
{% if accepted_stories.rows %}
<h4>Accepted</h4>
{% render_table accepted_stories %}
{% endif %}
{% endblock %}

