{% extends 'base-v2.html' %}

{% block content %}
<!-- Content Header (Page header) -->
<div class="content-header">
  <div class="container-fluid">
    <div class="row mb-2">
      <div class="col-sm-6">
        <h1 class="m-0">Projects</h1>
      </div><!-- /.col -->
      <div class="col-sm-6">
        <ol class="breadcrumb float-sm-right">
          <li class="breadcrumb-item"><a href="#">Home</a></li>
          <li class="breadcrumb-item active">Projects</li>
        </ol>
      </div><!-- /.col -->
    </div><!-- /.row -->
  </div><!-- /.container-fluid -->
</div>
<!-- /.content-header -->
<!-- Main content -->
<section class="content">
  <div class="container-fluid">
    <div class="container-fluid">
      <!-- Small boxes (Stat box) -->
      <div class="row">
        {% for project in my_projects %}
        <div class="col-lg-3 col-6">
          <!-- small box -->
          <div class="small-box bg-primary">
            <div class="inner">
              <h3>#{{ forloop.counter }}</h3>
              <h4> {{ project.name }} </h4>
              <p> {{ project.creation_date }} </p>
            </div>
            <div class="icon">
              <i class="fa fa-folder-open"></i>
            </div>
            <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
          </div>
        </div>
        {% endfor %}
        <!-- ./col -->
      </div>
      <!-- /.row -->
    </div><!-- /.container-fluid -->
</section>
<!-- /.content -->
{% endblock %}
<script>
  if (document.readyState !== 'loading') {
    console.log('document is already ready, just execute code here');
    resizeSmallBoxes();
  } else {
      document.addEventListener('DOMContentLoaded', function () {
          console.log('document was not ready, place code here');
          resizeSmallBoxes();
      });
  }

  function resizeSmallBoxes() {
    var smallBoxes = document.querySelectorAll('.small-box');
    var maxHeight = 0;
    smallBoxes.forEach(function (box) {
      if (box.offsetHeight > maxHeight) {
        maxHeight = box.offsetHeight;
      }
    });
    smallBoxes.forEach(function (box) {
      box.style.height = maxHeight.toString() + 'px';
    });
  }
</script>